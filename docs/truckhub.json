{
  "$schema": "http://json-schema.org/draft-04/schema#",

  "title": "TruckHub",

  "description" : "Represents the properties of a TruckHub",

  "type": "object",

  "properties": {
    "hub": { 
      "type": "string",
      "description": "A single word name of the directory containing the track hub files. Not displayed to hub users",
      "pattern": "^[a-zA-z0-9]+$"
    },

    "shortLabel": { 
      "type": "string",
      "description": "The short name for the track hub. Displayed as the hub name on the Track Hubs page and the track group name on the browser tracks page",
      "maxLength": 17
    },

    "longLabel": {
      "type": string,
      "description": "A longer descriptive label for the track hub. Displayed in the description field on the Track Hubs page",
      "maxLength": 80
    },

    "email": { 
      "format": "email",
      "description": "The contact to whom questions regarding the track hub should be directed",
    },

    "genomes": {
      "type": "array",
      "description": "The set of genome assemblies this hub contains data for",
      "items" : { "$ref": "#/definitions/assembly" },
      "minItems": 1,
      "uniqueItems": true
    },

    "additionalProperties": { "type": "string" }    
  },

  "required": [""],

  "definitions": {
    "name": {
      "type": "string",
      
      "definition": "The symbolic name of the track. This is the name of the dataset and must be unique within the Genome Browser or dataHub.",

      "pattern": "^[a-zA-z][a-zA-Z0-9_]+$"
    },

    "type": {
      "enum": [ "bam", "bigBed", "bigWig", "vcfTabix"],

      "description": "Declares the format of the data and is used to determine display methods and options. In many cases the type setting includes additional parameters to further specify the data format."
    },

    "shortLabel": {
      "type": "string",

      "definition": "Specifies the track's "short label", which is used in a number of places in the Browser to identify the track.",

      "maxLength": 17
    },

    "longLabel": {
      "type": "string",

      "definition": "Specifies the track's "long label", which is also used in numerous places in the Browser to identify a track. This label should be descriptive enough to allow users to uniquely identify the track within the Browser.",

      "maxLength": 76
    },

    "bigDataUrl": {
      "type": "string",

      "description": "The location of a remote data file containing the bulk of the data for the track. The setting is either the full URL (including http: or another protocol) or it is relative to the directory in which the trackDb file containing this setting is located. The file must be in one of the supported remote data file formats: bam, bigBed, bigWig or vcfTabix. Note that bam and vcfTabix types require a separate index file that must have the same name as the data file plus a standard suffix (".bai" and ".tbi" respectively).",

      "format": "uri"
    },   

    "visibility": {
      "enum": [ "hide", "dense", "squish", "pack", "full" ],

      "description": "Visibility (i.e. "display mode") specifies which of 5 modes (including 'hide') should be used to display the track within the Browser image. This setting is almost always dynamically customizable by each user. The exact configuration of the display for each mode depends upon the track's type, and some modes may not be supported for certain track types. Valid settigs: 1. hide: DEFAULT. The track is not displayed in the Browser image unless the user changes the display setting; 2. dense: The track is displayed as a single line or ribbon. In many cases multiple items are summarized or drawn on top of one another, and the long labels are not displayed; 3. squish: Each item is drawn individually, but at half height and without a label. (Not supported for all types.); 4. pack: Items are displayed individually at full height, but in a much more compact vertical space than in full mode. (Not supported for all types.); 5. full: Each item is displayed as a separate line in the Browser image. Graphed signals may be displayed in varying heights."
    },

    "assembly": {
      "type": "object",

      "description": "The container for the display and configuration properties for each track in a particular genome assembly",

      "properties": {
        "id": { 
	  "type": "string",
	  "description": "A tag used to identify the genome assembly"
	},

	"tracks": {
	  "type": "array",
	  "items": { 
	    "oneOf": [
	      "$ref": "#/definitions/track",
	      "$ref": "#/definitions/composite_track",
	      "$ref": "#/definitions/super_track",
	      "$ref": "#/definitions/aggregate_track"
	    ]
	  },
	  "minItems": 1,
	  "uniqueItems": true
	}
      }
    },

    "track": {
      "type": "object",

      "description": "Contains display and configuration properties common to all track types.",

      "properties": {
        "name": { "$ref": "#/definitions/name" },

	"shortLabel": { "$ref": "#/definitions/shortLabel" },

	"longLabel": { "$ref": "#/definitions/longLabel" },

	"bigDataUrl": { "$ref": "#/definitions/bigDataUrl" },

	"visibility": { "$ref": "#/definitions/visibility" },

	"boxedCfg": { 
	  "type": "boolean",

	  "description": "Configuration controls can be placed inside a box on the configuration page. This setting is decorative only, but can make a busy page look more cohesive. Not all track types currently support this feature, but the most common types do, including wig, bigWig, bed, and bigBed. DEFAULT: off."
	},

	"color": { 
	  "$ref": "#/definitions/color",

	  "description": "Many track types allow the color of the data displayed in the image to be specified with this setting. The setting accepts red, green and blue values, each in the range of 0-255 and delimited by commas. Though this setting is widely supported, some track types in certain display modes ignore it, such as the EST tracks in dense mode."
	},
	
	"altColor": { 
	  "$ref": "#/definitions/color",

	  "description": "Many track types allow setting a color range that varies from color to altColor. For instance the CpG Island tracks use the altColor setting to display the weaker islands, while the stronger ones are rendered in color. If altColor is not specified, the system will use a color halfway between that specified in the color tag and white instead."
	},

	
      },

      "required": [ "name", "shortLabel", "longLabel", "bigDataUrl", "visibility" ]
    },

    "composite_track": {},

    "super_track": {},

    "aggregate_track": {}
  }

}